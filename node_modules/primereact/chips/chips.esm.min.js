import*as e from"react";import{KeyFilter as n}from"primereact/keyfilter";import{Tooltip as t}from"primereact/tooltip";import{ObjectUtils as l,classNames as r,DomHandler as a}from"primereact/utils";function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},o.apply(this,arguments)}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function u(e){if(Array.isArray(e))return i(e)}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return u(e)||c(e)||p(e)||f()}function m(e){if(Array.isArray(e))return e}function d(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,a=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(l=t.next()).done)&&(a.push(l.value),!n||a.length!==n);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(i)throw r}}return a}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y=e.memo(e.forwardRef((function(i,u){var c,f,h=e.useState(!1),g=(f=2,m(c=h)||d(c,f)||p(c,f)||v()),b=g[0],w=g[1],E=e.useRef(null),k=e.useRef(null),D=e.useRef(i.inputRef),O=function(e,n){if(!i.disabled||!i.readOnly){var t=s(i.value),l=t.splice(n,1);j(l,n)&&(i.onRemove&&i.onRemove({originalEvent:e,value:l}),i.onChange&&i.onChange({originalEvent:e,value:t,stopPropagation:function(){},preventDefault:function(){},target:{name:i.name,id:i.id,value:t}}))}},x=function(e,n,t){if(n&&n.trim().length){var l=i.value?s(i.value):[];if(i.allowDuplicate||-1===l.indexOf(n)){var r=!0;i.onAdd&&(r=i.onAdd({originalEvent:e,value:n})),!1!==r&&l.push(n)}P(e,l,t)}},A=function(){a.focus(D.current)},R=function(e){var t=e.target.value,l=i.value||[];if(i.onKeyDown&&i.onKeyDown(e),!e.defaultPrevented)switch(e.which){case 8:0===D.current.value.length&&l.length>0&&O(e,l.length-1);break;case 13:t&&t.trim().length&&(!i.max||i.max>l.length)&&x(e,t,!0);break;default:i.keyfilter&&n.onKeyPress(e,i.keyfilter),I()?e.preventDefault():","===i.separator&&188===e.which&&x(e,t,!0)}},P=function(e,n,t){i.onChange&&i.onChange({originalEvent:e,value:n,stopPropagation:function(){},preventDefault:function(){},target:{name:i.name,id:i.id,value:n}}),D.current.value="",t&&e.preventDefault()},C=function(e){if(i.separator){var t=(e.clipboardData||window.clipboardData).getData("Text");if(i.keyfilter&&n.onPaste(e,i.keyfilter),t){var l=i.value||[],r=t.split(i.separator);r=r.filter((function(e){return(i.allowDuplicate||-1===l.indexOf(e))&&e.trim().length})),l=[].concat(s(l),s(r)),P(e,l,!0)}}},N=function(e){w(!0),i.onFocus&&i.onFocus(e)},S=function(e){w(!1),i.onBlur&&i.onBlur(e)},I=function(){return i.max&&i.value&&i.max===i.value.length},T=e.useMemo((function(){return i.value&&i.value.length||D.current&&D.current.value&&D.current.value.length}),[i.value]),j=function(e,n){return l.getPropValue(i.removable,{value:e,index:n,props:i})};e.useEffect((function(){l.combinedRefs(D,i.inputRef)}),[D,i.inputRef]);var B=function(n,t){return i.disabled||i.readOnly||!j(n,t)?null:e.createElement("span",{className:"p-chips-token-icon pi pi-times-circle",onClick:function(e){return O(e,t)}})},K=function(n,t){var l=i.itemTemplate?i.itemTemplate(n):n,r=e.createElement("span",{className:"p-chips-token-label"},l),a=B(n,t);return e.createElement("li",{key:t,className:"p-chips-token p-highlight"},r,a)},F=l.isNotEmpty(i.tooltip),L=l.findDiffKeys(i,y.defaultProps),M=r("p-chips p-component p-inputwrapper",{"p-inputwrapper-filled":T,"p-inputwrapper-focus":b},i.className),_=function(){var n=r("p-inputtext p-chips-multiple-container",{"p-disabled":i.disabled,"p-focus":b}),t=i.value?i.value.map(K):null,l=e.createElement("li",{className:"p-chips-input-token"},e.createElement("input",{ref:D,id:i.inputId,placeholder:i.placeholder,type:"text",name:i.name,disabled:i.disabled||I(),onKeyDown:R,onPaste:C,onFocus:N,onBlur:S,"aria-labelledby":i.ariaLabelledBy,readOnly:i.readOnly}));return e.createElement("ul",{ref:k,className:n,onClick:A},t,l)}();return e.createElement(e.Fragment,null,e.createElement("div",o({ref:E,id:i.id,className:M,style:i.style},L),_),F&&e.createElement(t,o({target:D,content:i.tooltip},i.tooltipOptions)))})));y.displayName="Chips",y.defaultProps={__TYPE:"Chips",id:null,inputRef:null,inputId:null,name:null,placeholder:null,value:null,max:null,disabled:null,readOnly:!1,removable:!0,style:null,className:null,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,separator:null,allowDuplicate:!0,itemTemplate:null,keyfilter:null,onAdd:null,onRemove:null,onChange:null,onFocus:null,onBlur:null,onKeyDown:null};export{y as Chips};
