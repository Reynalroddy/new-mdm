"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/hooks"),n=require("primereact/portal"),o=require("primereact/utils");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var i=a(e),l=u(t);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){if(Array.isArray(e))return s(e)}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){if(Array.isArray(e))return e}function m(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(u.push(n.value),!t||u.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){return v(e)||m(e,t)||p(e,t)||y()}var b=i.memo(i.forwardRef((function(e,t){var u=g(i.useState(!1),2),a=u[0],s=u[1],v=g(i.useState(e.position),2),m=v[0],y=v[1],E=g(i.useState(""),2),w=E[0],x=E[1],T=i.useRef(null),D=i.useRef(null),O=i.useRef(null),H=i.useRef(null),j=i.useRef(!0),S=i.useRef({}),I=g(r.useResizeListener({listener:function(e){!o.DomHandler.isTouchDevice()&&Y(e)}}),2),k=I[0],A=I[1],L=g(r.useOverlayScrollListener({target:O.current,listener:function(e){Y(e)},when:a}),2),C=L[0],U=L[1],N=function(t){return W(t,"mousetrack")||e.mouseTrack},P=function(t){return"true"===W(t,"disabled")||M(t,"disabled")||e.disabled},R=function(t){return W(t,"showondisabled")||e.showOnDisabled},Z=function(){return W(O.current,"autohide")||e.autoHide},W=function(e,t){return M(e,"data-pr-".concat(t))?e.getAttribute("data-pr-".concat(t)):null},M=function(e,t){return e&&e.hasAttribute(t)},_=function(t){var r=W(t,"showevent")||e.showEvent,n=W(t,"hideevent")||e.hideEvent;N(t)?(r="mousemove",n="mouseleave"):"focus"===(W(t,"event")||e.event)&&(r="focus",n="blur");return{showEvent:r,hideEvent:n}},q=function(e){return W(e,"position")||m},B=function(t){return{top:W(t,"mousetracktop")||e.mouseTrackTop,left:W(t,"mousetrackleft")||e.mouseTrackLeft}},F=function(t,r){if(D.current){var n=W(t,"tooltip")||e.content;n?(D.current.innerHTML="",D.current.appendChild(document.createTextNode(n)),r()):e.children&&r()}},z=function(t){O.current=t.currentTarget;var r,n=P(O.current);if(!(r=R(O.current)&&n?O.current.firstChild:O.current,!(e.content||W(r,"tooltip")||e.children))&&!n){var u=function(r){F(O.current,(function(){e.autoZIndex&&!o.ZIndexUtils.get(T.current)&&o.ZIndexUtils.set("tooltip",T.current,l.default.autoZIndex,e.baseZIndex||l.default.zIndex.tooltip),T.current.style.left="",T.current.style.top="",Z()&&(T.current.style.pointerEvents="none"),N(O.current)&&!H.current&&(H.current={width:o.DomHandler.getOuterWidth(T.current),height:o.DomHandler.getOuterHeight(T.current)}),K(O.current,{x:t.pageX,y:t.pageY},r)}))};if(a)V("updateDelay",u);else ee(e.onBeforeShow,{originalEvent:t,target:O.current})&&V("showDelay",(function(){var r=q(O.current),n=W(O.current,"classname");s(!0),y(r),x(n),u(r),ee(e.onShow,{originalEvent:t,target:O.current})}))}},Y=function(t){(te(),a)&&(ee(e.onBeforeHide,{originalEvent:t,target:O.current})&&V("hideDelay",(function(){(Z()||!1!==j.current)&&(o.ZIndexUtils.clear(T.current),o.DomHandler.removeClass(T.current,"p-tooltip-active"),s(!1),y(e.position),x(""),O.current=null,H.current=null,j.current=!0,ee(e.onHide,{originalEvent:t,target:O.current}))})))},K=function(t,r,n){var u=0,a=0,i=n||m;if(N(t)&&r){var l={width:o.DomHandler.getOuterWidth(T.current),height:o.DomHandler.getOuterHeight(T.current)};u=r.x,a=r.y;var c=B(t),s=c.top,f=c.left;switch(i){case"left":u-=l.width+f,a-=l.height/2-s;break;case"right":u+=f,a-=l.height/2-s;break;case"top":u-=l.width/2-f,a-=l.height+s;break;case"bottom":u-=l.width/2-f,a+=s}u<=0||H.current.width>l.width?(T.current.style.left="0px",T.current.style.right=window.innerWidth-l.width-u+"px"):(T.current.style.right="",T.current.style.left=u+"px"),T.current.style.top=a+"px",o.DomHandler.addClass(T.current,"p-tooltip-active")}else{var d=o.DomHandler.findCollisionPosition(i),p=W(t,"my")||e.my||d.my,h=W(t,"at")||e.at||d.at;T.current.style.padding="0px",o.DomHandler.flipfitCollision(T.current,t,p,h,(function(t){var r=t.at,n=r.x,u=e.at?"center"!==n&&n!==t.my.x?n:r.y:t.at["".concat(d.axis)];T.current.style.padding="",y(u),X(u),o.DomHandler.addClass(T.current,"p-tooltip-active")}))}},X=function(e){if(T.current){var t=getComputedStyle(T.current);"left"===e?T.current.style.left=parseFloat(t.left)-2*parseFloat(t.paddingLeft)+"px":"top"===e&&(T.current.style.top=parseFloat(t.top)-2*parseFloat(t.paddingTop)+"px")}},$=function(){Z()||(j.current=!1)},G=function(e){Z()||(j.current=!0,Y(e))},J=function(e){if(e){var t=_(e),r=t.showEvent,n=t.hideEvent,o=re(e);o.addEventListener(r,z),o.addEventListener(n,Y)}},Q=function(e){if(e){var t=_(e),r=t.showEvent,n=t.hideEvent,o=re(e);o.removeEventListener(r,z),o.removeEventListener(n,Y)}},V=function(t,r){te();var n=W(O.current,t.toLowerCase())||e[t];n?S.current["".concat(t)]=setTimeout((function(){return r()}),n):r()},ee=function(e){if(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=e.apply(void 0,r);return void 0===o&&(o=!0),o}return!0},te=function(){Object.keys(S.current).forEach((function(e){return clearTimeout(e)}))},re=function(e){if(e){if(R(e)){if(e.hasWrapper)return e.parentElement;var t=document.createElement("span");return e.parentNode.insertBefore(t,e),t.appendChild(e),e.hasWrapper=!0,t}var r;return e.hasWrapper&&((r=e.parentElement).replaceWith.apply(r,f(n=e.parentElement.childNodes)||d(n)||p(n)||h()),delete e.hasWrapper),e}var n;return null},ne=function(e){ue(e),oe(e)},oe=function(t){ae(t||e.target,J)},ue=function(t){ae(t||e.target,Q)},ae=function(e,t){if(e=o.ObjectUtils.getRefElement(e))if(o.DomHandler.isElement(e))t(e);else{var r=function(e){o.DomHandler.find(document,e).forEach((function(e){t(e)}))};e instanceof Array?e.forEach((function(e){r(e)})):r(e)}};i.useEffect((function(){a&&O.current&&P(O.current)&&Y()})),r.useMountEffect((function(){oe()})),r.useUpdateEffect((function(){return oe(),function(){ue()}}),[z,Y,e.target]),r.useUpdateEffect((function(){return a&&(k(),C()),function(){A(),U()}}),[a]),r.useUpdateEffect((function(){a&&V("updateDelay",(function(){F(O.current,(function(){K(O.current)}))}))}),[e.content]),r.useUnmountEffect((function(){te(),ue(),o.ZIndexUtils.clear(T.current)})),i.useImperativeHandle(t,(function(){return{updateTargetEvents:ne,loadTargetEvents:oe,unloadTargetEvents:ue}}));var ie,le,ce,se,fe,de,pe;if(a){var he=(fe=o.ObjectUtils.findDiffKeys(e,b.defaultProps),de=o.classNames("p-tooltip p-component",(ie={},le="p-tooltip-".concat(m),ce=!0,le in ie?Object.defineProperty(ie,le,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ie[le]=ce,ie),e.className,w),se=O.current,pe=!(e.content||W(se,"tooltip")),i.createElement("div",c({id:e.id,ref:T,className:de,style:e.style,role:"tooltip","aria-hidden":a},fe,{onMouseEnter:$,onMouseLeave:G}),i.createElement("div",{className:"p-tooltip-arrow"}),i.createElement("div",{ref:D,className:"p-tooltip-text"},pe&&e.children)));return i.createElement(n.Portal,{element:he,appendTo:e.appendTo,visible:!0})}return null})));b.displayName="Tooltip",b.defaultProps={__TYPE:"Tooltip",id:null,target:null,content:null,disabled:!1,className:null,style:null,appendTo:null,position:"right",my:null,at:null,event:null,showEvent:"mouseenter",hideEvent:"mouseleave",autoZIndex:!0,baseZIndex:0,mouseTrack:!1,mouseTrackTop:5,mouseTrackLeft:5,showDelay:0,updateDelay:0,hideDelay:0,autoHide:!0,showOnDisabled:!1,onBeforeShow:null,onBeforeHide:null,onShow:null,onHide:null},exports.Tooltip=b;
